<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>RichTide Mini App</title>

<script src="https://telegram.org/js/telegram-web-app.js"></script>

<style>
*{box-sizing:border-box;font-family:Arial}
body{
    margin:0;
    background:#05060b;
    color:white;
}
.hidden{display:none}

#loader{
    height:100vh;
    display:flex;
    justify-content:center;
    align-items:center;
    font-size:24px;
}

.top{
    display:flex;
    justify-content:space-between;
    padding:15px;
    font-size:14px;
}

.balance{
    font-size:20px;
    font-weight:bold;
}

.card{
    background:#0b0f1c;
    border-radius:18px;
    padding:20px;
    margin:15px;
    text-align:center;
    border:1px solid #1c2140;
}

.menu{
    display:grid;
    grid-template-columns:repeat(2,1fr);
    gap:14px;
    padding:15px;
}

.menu button,
.btn{
    background:#141a3a;
    border:none;
    color:white;
    padding:16px;
    border-radius:14px;
    font-size:16px;
}

.btn{
    width:90%;
    margin-top:10px;
}

.page{
    padding-bottom:30px;
}
</style>
</head>

<body>

<div id="loader">ğŸŒŠ Loading RichTide...</div>

<div id="app" class="hidden">

    <div class="top">
        <div id="user">@user</div>
        <div class="balance" id="balance">0 ğŸ’°</div>
    </div>

    <!-- HOME -->
    <div id="home" class="page">

        <div class="card">
            <h2>ğŸ’ RichTide</h2>
            <p>Earn coins directly in Telegram</p>
        </div>

        <div class="menu">
            <button onclick="openPage('earn')">ğŸ’° Earn</button>
            <button onclick="openPage('tasks')">ğŸ“‹ Tasks</button>
            <button onclick="openPage('invite')">ğŸ‘¥ Invite</button>
            <button onclick="openPage('withdraw')">ğŸ¦ Withdraw</button>
        </div>

        <div class="card">
            <h3>ğŸ”¥ Daily Bonus</h3>
            <button class="btn" onclick="daily()">Claim +50</button>
        </div>

    </div>

    <!-- EARN -->
    <div id="earn" class="page hidden">
        <div class="card">
            <h2>ğŸ’° Earn Coins</h2>
            <button class="btn" onclick="earn(5)">Watch Ad +5</button>
            <button class="btn" onclick="earn(10)">Premium Ad +10</button>
            <button class="btn" onclick="earn(20)">Boost Ad +20</button>
            <br><br>
            <button class="btn" onclick="openPage('home')">â¬… Back</button>
        </div>
    </div>

    <!-- TASKS -->
    <div id="tasks" class="page hidden">
        <div class="card">
            <h2>ğŸ“‹ Tasks</h2>
            <button class="btn" onclick="task(20)">Join Telegram +20</button>
            <button class="btn" onclick="task(30)">Follow Channel +30</button>
            <button class="btn" onclick="task(50)">Invite 1 friend +50</button>
            <br><br>
            <button class="btn" onclick="openPage('home')">â¬… Back</button>
        </div>
    </div>

    <!-- INVITE -->
    <div id="invite" class="page hidden">
        <div class="card">
            <h2>ğŸ‘¥ Invite Friends</h2>
            <p>Your referral link:</p>
            <p id="refLink"></p>
            <button class="btn" onclick="copy()">Copy Link</button>
            <br><br>
            <button class="btn" onclick="openPage('home')">â¬… Back</button>
        </div>
    </div>

    <!-- WITHDRAW -->
    <div id="withdraw" class="page hidden">
        <div class="card">
            <h2>ğŸ¦ Withdraw</h2>
            <p>Minimum: 1000 coins</p>
            <button class="btn" onclick="withdraw()">Request Withdraw</button>
            <br><br>
            <button class="btn" onclick="openPage('home')">â¬… Back</button>
        </div>
    </div>

</div>

<script>
const tg = window.Telegram.WebApp;
tg.expand();

let uid = tg.initDataUnsafe?.user?.id || Math.floor(Math.random()*999999);
let username = tg.initDataUnsafe?.user?.username || "guest";

document.getElementById("user").innerText = "@" + username;

let balance = Number(localStorage.getItem("balance")) || 0;
let lastDaily = localStorage.getItem("daily") || 0;

function save(){
    localStorage.setItem("balance",balance);
}

function update(){
    document.getElementById("balance").innerText = balance + " ğŸ’°";
    save();
}

function openPage(id){
    document.querySelectorAll(".page").forEach(p=>p.classList.add("hidden"));
    document.getElementById(id).classList.remove("hidden");
}

function earn(v){
    balance += v;
    update();
    alert("You earned +" + v);
}

function task(v){
    balance += v;
    update();
    alert("Task completed +" + v);
}

function daily(){
    let now = Date.now();
    if(now - lastDaily < 86400000){
        alert("Already claimed today");
        return;
    }
    lastDaily = now;
    localStorage.setItem("daily",now);
    balance += 50;
    update();
}

function withdraw(){
    if(balance < 1000){
        alert("Not enough coins");
        return;
    }
    alert("Withdraw request sent");
}

function copy(){
    navigator.clipboard.writeText(ref);
    alert("Copied");
}

let ref = "https://t.me/YOUR_BOT?start=" + uid;
document.getElementById("refLink").innerText = ref;

setTimeout(()=>{
    document.getElementById("loader").style.display="none";
    document.getElementById("app").classList.remove("hidden");
},1500);

update();
</script>

</body>
</html>
